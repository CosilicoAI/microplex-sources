# CPS ASEC Variable Index
# Current Population Survey - Annual Social and Economic Supplement

source: cps-asec
provider: "U.S. Census Bureau"
description: "Annual household survey providing income, poverty, and health insurance data"
url: "https://www.census.gov/programs-surveys/cps.html"
documentation: "https://www2.census.gov/programs-surveys/cps/techdocs/cpsmar24.pdf"

years_available: [2018, 2019, 2020, 2021, 2022, 2023, 2024]

# DESIGN PRINCIPLE: Primary Inputs Only
# -------------------------------------
# This index lists PRIMARY survey inputs - raw responses that cannot be derived.
# Derived values (like "number of qualifying children") are NOT extracted because:
# 1. Definitions vary by program (EITC ยง32(c)(3) vs CTC ยง24 vs SNAP)
# 2. The rules engine should be the source of truth for applying statutes
# 3. CPS-derived counts may not match statutory definitions
#
# Qualifying children, tax liability, benefit amounts, etc. should be computed
# in the rules engine (cosilico-us) from primary inputs.

entities:
  - person
  - tax_unit
  - spm_unit
  - household
  - family

variables:
  # Income Variables - Earnings
  - WSAL_VAL       # Wages and salaries
  - SEMP_VAL       # Self-employment (nonfarm)
  - FRSE_VAL       # Farm self-employment
  - PEARNVAL       # Total earnings (wages + SE)
  - PTOTVAL        # Total person income (all sources)

  # Income Variables - Investment
  - INT_VAL        # Interest income
  - DIV_VAL        # Dividend income
  - RNT_VAL        # Rental income
  - CAP_VAL        # Capital gains (limited coverage)

  # Income Variables - Retirement
  - SS_VAL         # Social Security benefits
  - PNSN_VAL       # Pension income
  - ANN_VAL        # Annuity income
  - RETCB_VAL      # Retirement contributions

  # Income Variables - Transfers
  - SSI_VAL        # Supplemental Security Income
  - UC_VAL         # Unemployment compensation
  - VET_VAL        # Veterans benefits
  - WC_VAL         # Workers compensation
  - PAW_VAL        # Public assistance/welfare
  - DIS_VAL1       # Disability income 1
  - DIS_VAL2       # Disability income 2

  # Income Variables - Other
  - CSP_VAL        # Child support received
  - CHSP_VAL       # Child support paid
  - ALM_VAL        # Alimony received
  - OI_VAL         # Other income

  # Tax Unit Variables - Income
  - AGI            # Adjusted gross income
  - TAX_INC        # Taxable income

  # Tax Unit Variables - Federal Tax
  - FEDTAX_AC      # Federal income tax after credits
  - FEDTAX_BC      # Federal income tax before credits
  - FICA           # FICA taxes (SS + Medicare)
  - MARG_TAX       # Marginal tax rate

  # Tax Unit Variables - Credits
  - EIT_CRED       # Earned Income Tax Credit
  - CTC_CRD        # Child Tax Credit
  - ACTC_CRD       # Additional Child Tax Credit

  # Tax Unit Variables - State Tax
  - STATETAX_A     # State income tax after credits
  - STATETAX_B     # State income tax before credits

  # SPM Unit Variables - Benefits
  - SPM_SNAPSUB    # SNAP subsidy
  - SPM_WICVAL     # WIC value
  - SPM_SCHLUNCH   # School lunch subsidy
  - SPM_ENGVAL     # Energy assistance
  - SPM_BBSUBVAL   # Broadband benefit
  - SPM_CAPHOUSESUB  # Housing subsidy

  # SPM Unit Variables - Tax Credits
  - SPM_EITC       # EITC (SPM calculation)
  - SPM_ACTC       # Additional CTC

  # SPM Unit Variables - Taxes
  - SPM_FEDTAX     # Federal taxes
  - SPM_STTAX      # State taxes
  - SPM_FICA       # FICA taxes

  # SPM Unit Variables - Expenses
  - SPM_WKXPNS     # Work expenses
  - SPM_MEDXPNS    # Medical expenses
  - SPM_CHILDCAREXPNS  # Childcare expenses
  - SPM_CHILDSUPPD # Child support paid

  # SPM Unit Variables - Resources
  - SPM_WEIGHT     # SPM weight
  - SPM_RESOURCES  # Total resources
  - SPM_POVTHRESHOLD  # Poverty threshold

  # Demographics
  - A_AGE          # Age
  - A_SEX          # Sex
  - A_MARITL       # Marital status
  - PRDTRACE       # Race
  - PRDTHSP        # Hispanic origin
  - PRCITSHP       # Citizenship status
  - A_HSCOL        # Educational attainment

  # Geographic
  - GESTFIPS       # State FIPS code

  # Identifiers
  - PH_SEQ         # Household sequence
  - PF_SEQ         # Family sequence
  - P_SEQ          # Person sequence
  - A_LINENO       # Person line number within household
  - TAX_ID         # Tax unit ID
  - SPM_ID         # SPM unit ID

  # Weights
  - A_FNLWGT       # Person weight
  - MARSUPWT       # March supplement weight

  # Relationship (primary inputs for qualifying child derivation)
  - A_FAMREL       # Relationship to family reference person
  - PARENT         # Line number of parent in household

  # Benefit Receipt Indicators
  - WICYN          # WIC received
  - MOOP           # Medical out-of-pocket
